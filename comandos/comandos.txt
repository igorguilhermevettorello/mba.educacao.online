# Comandos para Migrations

## Criar Migration do Bounded Context Cursos
dotnet ef migrations add InitialMigrations \
  --project ./src/Cursos/MBA.Educacao.Online.Cursos.Data/MBA.Educacao.Online.Cursos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context CursoContext \
  --output-dir ./Migrations

dotnet ef migrations add InitialMigrations --project ./src/Cursos/MBA.Educacao.Online.Cursos.Data/MBA.Educacao.Online.Cursos.Data.csproj --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj --context CursoContext --output-dir ./Migrations

## Aplicar Migration do Bounded Context Cursos
dotnet ef database update \
  --project ./src/Cursos/MBA.Educacao.Online.Cursos.Data/MBA.Educacao.Online.Cursos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context CursoContext \
  --connection "Data Source=/home/igor/Documentos/projetos/mba.educacao.online/sqlite/dev.db"

## Criar Migration do Identity
dotnet ef migrations add IdentityInitialMigration \
  --project ./src/Core/MBA.Educacao.Online.Core.Data/MBA.Educacao.Online.Core.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context IdentityDbContext \
  --output-dir ./Migrations

dotnet ef migrations add IdentityInitialMigration --project ./src/Core/MBA.Educacao.Online.Core.Data/MBA.Educacao.Online.Core.Data.csproj --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj --context IdentityDbContext --output-dir ./Migrations


## Aplicar Migration do Identity
dotnet ef database update \
  --project ./src/Core/MBA.Educacao.Online.Core.Data/MBA.Educacao.Online.Core.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context IdentityDbContext \
  --connection "Data Source=/home/igor/Documentos/projetos/mba.educacao.online/sqlite/dev.db"

## Remover última migration (se necessário)
# Para Cursos:
dotnet ef migrations remove \
  --project ./src/Cursos/MBA.Educacao.Online.Cursos.Data/MBA.Educacao.Online.Cursos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context CursoContext

# Para Identity:
dotnet ef migrations remove \
  --project ./src/Core/MBA.Educacao.Online.Core.Data/MBA.Educacao.Online.Core.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context IdentityDbContext

## Criar Migration do Bounded Context Vendas
dotnet ef migrations add InitialMigrations \
  --project ./src/Vendas/MBA.Educacao.Online.Vendas.Data/MBA.Educacao.Online.Vendas.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context PedidoContext \
  --output-dir ./Migrations

dotnet ef migrations add InitialMigrations --project ./src/Vendas/MBA.Educacao.Online.Vendas.Data/MBA.Educacao.Online.Vendas.Data.csproj --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj --context PedidoContext --output-dir ./Migrations

## Aplicar Migration do Bounded Context Vendas
dotnet ef database update \
  --project ./src/Vendas/MBA.Educacao.Online.Vendas.Data/MBA.Educacao.Online.Vendas.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context PedidoContext

# Para Vendas:
dotnet ef migrations remove \
  --project ./src/Vendas/MBA.Educacao.Online.Vendas.Data/MBA.Educacao.Online.Vendas.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context PedidoContext

## Criar Migration do Bounded Context Alunos
dotnet ef migrations add InitialMigrations \
  --project ./src/Alunos/MBA.Educacao.Online.Alunos.Data/MBA.Educacao.Online.Alunos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context AlunoContext \
  --output-dir ./Migrations

dotnet ef migrations add InitialMigrations --project ./src/Alunos/MBA.Educacao.Online.Alunos.Data/MBA.Educacao.Online.Alunos.Data.csproj --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj --context AlunoContext --output-dir ./Migrations  

dotnet ef migrations add InitialMigrations --project ./src/Alunos/MBA.Educacao.Online.Alunos.Data/MBA.Educacao.Online.Alunos.Data.csproj --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj --context AlunoContext --output-dir ./Migrations

## Aplicar Migration do Bounded Context Alunos
dotnet ef database update \
  --project ./src/Alunos/MBA.Educacao.Online.Alunos.Data/MBA.Educacao.Online.Alunos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context AlunoContext

# Para Alunos:
dotnet ef migrations remove \
  --project ./src/Alunos/MBA.Educacao.Online.Alunos.Data/MBA.Educacao.Online.Alunos.Data.csproj \
  --startup-project ./api/MBA.Educacao.Online.API/MBA.Educacao.Online.API.csproj \
  --context AlunoContext

############################################
find ~/ -type f -name "dev.db"
find . -type d \( -name "bin" -o -name "obj" \) -exec rm -rf {} +
############################################

